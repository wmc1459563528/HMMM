(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3896c3e2","chunk-d4df7c82","chunk-45ebb1ce"],{"277e":function(t,e,i){},"31f7":function(t,e,i){"use strict";i("8233")},7669:function(t,e,i){},"7b35":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"articles-container"},[e("el-card",[e("el-row",[e("el-col",{attrs:{span:22}},[e("el-form",{attrs:{"label-width":"80px",size:"small",inline:!0}},[e("el-form-item",{attrs:{label:"关键字"}},[e("el-input",{staticStyle:{},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),e("el-form-item",{attrs:{label:"状态"}},[e("el-select",{model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},[e("el-option",{attrs:{value:1,label:"启用"}}),e("el-option",{attrs:{value:0,label:"禁用"}})],1)],1),e("el-form-item",{staticStyle:{"text-align":"right"}},[e("el-button",{on:{click:function(e){return t.handleClear()}}},[t._v("清除")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSearch()}}},[t._v("搜索")])],1)],1)],1),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[e("el-button",{attrs:{icon:"el-icon-edit",type:"success",size:"small"},on:{click:function(e){return t.handleOpenDialog()}}},[t._v("新增技巧")])],1)],1),e("el-row",[e("el-col",{attrs:{span:24}},[e("el-alert",{attrs:{title:"数据一共".concat(t.total,"条"),type:"info","show-icon":"",closable:!1}})],1)],1),e("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[e("el-col",{attrs:{span:24}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ArticlesList}},[e("el-table-column",{attrs:{type:"index",label:"序号",index:t.indexMethod,width:"80"}}),e("el-table-column",{attrs:{label:"文章标题",width:"400px"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(i.row.title)+" "),i.row.videoURL?e("a",{staticClass:"el-icon-film",attrs:{href:"javascript:;"},on:{click:function(e){return t.handleVideo(i.row.videoURL)}}}):t._e()]}}])}),e("el-table-column",{attrs:{label:"阅读数",prop:"visits"}}),e("el-table-column",{attrs:{label:"录入人",prop:"username"}}),e("el-table-column",{attrs:{label:"录入时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("parseTimeByString")(e.row.createTime)))]}}])}),e("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1===e.row.state?"已启用":"已禁用"))]}}])}),e("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handlePreview(i.row)}}},[t._v("预览")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handletoggleState(i.row)}}},[t._v(t._s(1===i.row.state?"禁用":"启用"))]),e("el-button",{attrs:{type:"text",disabled:1===i.row.state},on:{click:function(e){return t.handleOpenDialog(i.row)}}},[t._v("修改")]),e("el-button",{attrs:{type:"text",disabled:1===i.row.state||i.row.totals>0},on:{click:function(e){return t.handleDelArticle(i.row)}}},[t._v("删除")])]}}])})],1)],1)],1),e("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{background:"",layout:"prev, pager, next, sizes, jumper",total:t.total,"page-size":t.pagesize,"current-page":t.page,"page-sizes":[5,10,20,30]},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),e("articles-add",{ref:"articlesAdd",attrs:{data:t.currArticle},on:{updateList:function(e){return t.handelUpdateList()}}}),e("articles-preview",{attrs:{"articles-list":t.currArticle,isShow:t.isShowDialogVisible},on:{"update:isShow":function(e){t.isShowDialogVisible=e},"update:is-show":function(e){t.isShowDialogVisible=e}}}),t.videoURL?e("div",[e("div",{staticClass:"el-icon-close",on:{click:t.handleClose}},[e("video",{ref:"video",attrs:{src:t.videoURL,controls:""}})])]):t._e()],1)},a=[],r=i("c7eb"),l=i("5530"),s=i("1da1"),o=i("b3af"),c=i("c524"),u=i("8561"),d={name:"ArticlesList",components:{ArticlesAdd:c["default"],ArticlesPreview:u["default"]},data:function(){return{form:{keyword:"",state:null},page:1,pagesize:10,total:0,ArticlesList:[],currArticle:{},videoURL:null,isShowDialogVisible:!1,loading:!1}},created:function(){this.getAtricleList()},methods:{getAtricleList:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var i,n,a,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(o["c"])(Object(l["a"])(Object(l["a"])({},t.form),{},{page:t.page,pagesize:t.pagesize}));case 3:i=e.sent,n=i.data,a=n.items,s=n.counts,t.ArticlesList=a,t.total=s,t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()},indexMethod:function(t){return t+1+this.pagesize*(this.page-1)},handleCurrentChange:function(t){this.page=t,this.getAtricleList()},handleSizeChange:function(t){this.page=1,this.pagesize=t,this.getAtricleList()},handletoggleState:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function i(){return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(o["b"])({id:t.id,state:1===t.state?0:1});case 2:e.$message.success("操作成功"),t.state=1===t.state?0:1;case 4:case"end":return i.stop()}}),i)})))()},handleVideo:function(t){var e=this;this.videoURL=t,console.log(this.$refs.video),this.$nextTick((function(){e.$refs.video.play()}))},handleClose:function(){var t=this;this.$nextTick((function(){t.$refs.video.pause()})),this.videoURL=null},handleClear:function(){this.form={keyword:"",state:null},this.getAtricleList()},handleSearch:function(){this.page=1,this.getAtricleList()},handlePreview:function(t){this.isShowDialogVisible=!0,this.currArticle=t},handleOpenDialog:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currArticle=e,this.$nextTick((function(){t.$refs.articlesAdd.open()}))},handleDelArticle:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function i(){return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$confirm("此操作将永久删除该文章, 是否继续?","提示",{type:"warning"});case 2:return i.next=4,Object(o["d"])(t);case 4:1===e.ArticlesList.length&&e.page>1&&e.page--,e.$message.success("删除成功"),e.getAtricleList();case 7:case"end":return i.stop()}}),i)})))()},handelUpdateList:function(){this.currArticle.id||(this.page=1),this.getAtricleList()}}},f=d,p=(i("7b4d"),i("2877")),h=Object(p["a"])(f,n,a,!1,null,"35ad1644",null);e["default"]=h.exports},"7b4d":function(t,e,i){"use strict";i("277e")},"819e":function(t,e,i){"use strict";i("7669")},8233:function(t,e,i){},8561:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("el-dialog",{attrs:{title:"预览文章",visible:t.isShow},on:{close:t.handleClose}},[e("div",{staticClass:"title"},[e("h2",[t._v(t._s(t.ArticlesList.title))])]),e("div",{staticClass:"message"},[e("span",[t._v(t._s(t._f("parseTimeByString")(t.ArticlesList.createTime)))]),e("span",[t._v(t._s(t.ArticlesList.username))]),e("span",{staticClass:"el-icon-view"}),e("span",[t._v(t._s(t.ArticlesList.state))])]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.ArticlesList.articleBody)}})])],1)},a=[],r={name:"ArticlesPreview",props:{isShow:{type:Boolean,default:!1},ArticlesList:{type:Object,default:function(){}}},methods:{handleClose:function(){this.$emit("update:isShow",!1)}}},l=r,s=(i("819e"),i("2877")),o=Object(s["a"])(l,n,a,!1,null,"cecd8e26",null);e["default"]=o.exports},b3af:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r})),i.d(e,"e",(function(){return l})),i.d(e,"d",(function(){return s})),i.d(e,"b",(function(){return o}));i("99af");var n=i("b775"),a=function(t){return Object(n["a"])("/articles","get",t)},r=function(t){return Object(n["a"])("/articles","post",t)},l=function(t){return Object(n["a"])("/articles/".concat(t.id),"put",t)},s=function(t){return Object(n["a"])("/articles/".concat(t.id),"delete",t)},o=function(t){return Object(n["a"])("/articles/".concat(t.id,"/").concat(t.state),"post",t)}},c524:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"articles-add"},[e("el-dialog",{attrs:{title:"".concat(t.data.id?"修改":"新增","文章"),visible:t.show,width:"800px"},on:{"update:visible":function(e){t.show=e}}},[e("el-form",{ref:"form",attrs:{size:"small","label-width":"100px",model:t.formModel,rules:t.formRules}},[e("el-form-item",{attrs:{label:"文章标题：",prop:"title"}},[e("el-input",{attrs:{placeholder:"请输入文章标签"},model:{value:t.formModel.title,callback:function(e){t.$set(t.formModel,"title",e)},expression:"formModel.title"}})],1),e("el-form-item",{attrs:{label:"文章内容：",prop:"articleBody"}},[e("quill-editor",{attrs:{options:t.editorOptions},model:{value:t.formModel.articleBody,callback:function(e){t.$set(t.formModel,"articleBody",e)},expression:"formModel.articleBody"}})],1),e("el-form-item",{attrs:{label:"视频地址：",prop:"videoURL"}},[e("el-input",{attrs:{placeholder:"请输入视频地址"},model:{value:t.formModel.videoURL,callback:function(e){t.$set(t.formModel,"videoURL",e)},expression:"formModel.videoURL"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirm()}}},[t._v("确认")])],1)],1)],1)},a=[],r=i("c7eb"),l=i("1da1"),s=i("b3af"),o=(i("a753"),i("8096"),i("14e1"),i("953d")),c={name:"ArticlesAdd",components:{quillEditor:o["quillEditor"]},props:{data:{default:function(){},type:Object}},data:function(){return{show:!1,formModel:{id:null,title:null,articleBody:null,videoURL:null},formRules:{title:[{required:!0,message:"请输入文章标题",tirgger:["blur","change"]}],articleBody:[{required:!0,message:"请输入文章内容",tirgger:["blur","change"]}]},editorOptions:{placeholder:"请输入正文",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],["image","video","link"]]}}}},methods:{open:function(){var t=this;if(this.show=!0,this.data.id){var e=this.data,i=e.id,n=e.title,a=e.articleBody,r=e.videoURL;this.formModel={id:i,title:n,articleBody:a,videoURL:r}}else this.formModel={id:null,title:null,articleBody:null,videoURL:null};this.$nextTick((function(){t.$refs.form.clearValidate()}))},confirm:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs.form.validate(function(){var e=Object(l["a"])(Object(r["a"])().mark((function e(i){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(t.data.id){e.next=7;break}return e.next=5,Object(s["a"])(t.formModel);case 5:e.next=10;break;case 7:return t.formModel.id=t.data.id,e.next=10,Object(s["e"])(t.formModel);case 10:t.$message.success("操作成功"),t.show=!1,t.$emit("updateList");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()}}},u=c,d=(i("31f7"),i("2877")),f=Object(d["a"])(u,n,a,!1,null,"54a36e56",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-3896c3e2.cfbe5b0b.js.map