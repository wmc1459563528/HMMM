(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7dbc9e2"],{"1dd7":function(t,e,a){"use strict";var n=a("f0f2"),r=a.n(n);r.a},"72a0":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n=[{value:1,label:"启用"},{value:0,label:"禁用"}]},b7c9:function(t,e,a){},eed2:function(t,e,a){"use strict";var n=a("b7c9"),r=a.n(n);r.a},f0f2:function(t,e,a){},f21f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("el-card",{attrs:{shadow:"never"}},[a("el-form",{ref:"form",attrs:{model:t.form}},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标签名称：",prop:"tags"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"180px"},attrs:{placeholder:"请输入"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.hQuery(e)}},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"城市"}},[a("MyCity",{model:{value:t.form.provAndCity,callback:function(e){t.$set(t.form,"provAndCity",e)},expression:"form.provAndCity"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业简称：",prop:"shortName"}},[a("el-input",{staticStyle:{width:"180px"},model:{value:t.form.shortName,callback:function(e){t.$set(t.form,"shortName","string"===typeof e?e.trim():e)},expression:"form.shortName"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"状态：",prop:"state"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.status,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.hQuery}},[t._v("查询")]),a("el-button",{attrs:{size:"small"},on:{click:t.hResetForm}},[t._v("重置")])],1)],1)],1),a("el-button",{staticClass:"filter-item fr",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:t.hAddComponey}},[t._v("新增公司")])],1)]),t.cResultTip?a("el-alert",{staticClass:"alert",attrs:{title:t.cResultTip,type:"info",closable:!1,"show-icon":""}}):t._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.companys,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"企业编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.number))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"企业简称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.shortName))])]}}])}),a("el-table-column",{attrs:{label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.tags))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"创建者"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.creatorID))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"创建日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.addDate))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remarks.substring(0,3)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.state?a("span",[t._v("启用")]):a("span",[t._v("禁用")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"280","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.hEdit(e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.hSwitchStatus(e.row)}}},[a("span",[t._v(t._s(0===e.row.state?"启用":"禁用"))])]),"deleted"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.hDelete(e.row.id)}}},[t._v("删除")]):t._e()]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}],staticClass:"pagination"},[a("div",{staticClass:"pages"},[a("el-pagination",{attrs:{background:"","current-page":Number(t.form.page),total:Number(t.total),"page-size":Number(t.form.pagesize),"page-sizes":[10,20,30,50],layout:"sizes, prev, pager, next, jumper"},on:{"size-change":t.hSizeChange,"current-change":t.hCurrentChange}})],1)])],1),t.isShowDialog?a("el-dialog",{attrs:{title:t.cTitle,visible:t.isShowDialog},on:{"update:visible":function(e){t.isShowDialog=e}}},[a("CompanysAdd",{ref:"editUser",attrs:{companyId:t.curCompanyId},on:{close:function(e){t.isShowDialog=!1},refresh:t.loadCompanys}})],1):t._e()],1)])},r=[],s=(a("a9e3"),a("96cf"),a("1da1")),o=a("72a0"),i=a("546c"),l=a("30c0"),c=a("bf15"),u={name:"CompanysList",components:{CompanysAdd:l["default"],MyCity:c["default"]},data:function(){return{companys:[],total:0,curCompanyId:null,isLoading:!1,isShowDialog:!1,form:{shortName:"",state:null,tags:"",provAndCity:{province:"",city:""},page:1,pagesize:10}}},created:function(){this.loadCompanys()},computed:{status:function(){return o["a"]},cResultTip:function(){return"共 ".concat(this.total," 条记录")},cTitle:function(){return this.curCompanyId?"编辑公司":"添加新公司"}},methods:{buildParams:function(){var t={},e=this.form,a=e.page,n=e.pagesize,r=e.provAndCity,s=e.tags,o=e.state;return t.page=a||null,t.pagesize=n||null,t.tags=s||null,t.province=r.city||null,t.city=r.city||null,t.state=""===o?null:o,t},loadCompanys:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,a=t.buildParams(),e.prev=2,e.next=5,Object(i["d"])(a);case 5:n=e.sent,r=n.data,t.companys=r.items,t.total=r.counts,t.isLoading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),console.log(e.t0),t.isLoading=!0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},hResetForm:function(){this.$refs.form.resetFields(),this.form.provAndCity.province="",this.form.provAndCity.city=""},hQuery:function(){this.form.page=1,this.loadCompanys()},hSizeChange:function(t){this.form.pagesize=t,1===this.form.page&&this.loadCompanys()},hCurrentChange:function(t){this.form.page=t,this.loadCompanys()},hAddComponey:function(){this.curCompanyId="",this.isShowDialog=!0},hEdit:function(t){this.curCompanyId=t,this.isShowDialog=!0},doDelete:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(i["e"])({id:t});case 3:e.$message.success("成功删除了用户!"),e.loadCompanys(),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),e.$message.error("删除失败!");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},hDelete:function(t){var e=this;this.$confirm("此操作将永久删除用户 , 是否继续?","提示",{type:"warning"}).then((function(){e.doDelete(t)})).catch((function(){e.$message.info("已取消操作!")}))},doSwitch:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={id:t.id,state:Number(!t.state)},console.log(n),a.next=4,Object(i["c"])(n).then((function(t){e.$message.success("操作成功!"),e.loadCompanys(e.form)})).catch((function(t){e.$message.error(o["a"]+"失败!")}));case 4:case"end":return a.stop()}}),a)})))()},hSwitchStatus:function(t){var e=this,a="已成功"+(t.state?"禁用":"启用")+", 是否继续?";this.$confirm(a,"提示",{type:"warning"}).then((function(){e.doSwitch(t)})).catch((function(){e.$message.info("已取消操作!")}))}}},p=u,d=(a("eed2"),a("1dd7"),a("2877")),f=Object(d["a"])(p,n,r,!1,null,"292aa1e7",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-a7dbc9e2.b24f2f67.js.map